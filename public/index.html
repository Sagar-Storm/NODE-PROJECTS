<html>
<head>
    <title> chat app </title>
</head>

<body>
    <p> Welcome to the chat app </p>

 <script src = "/socket.io/socket.io.js"> </script>
   <label> Enter your name <input type = "text" id = "userID" > </label> <br> <br>
  <label> Enter your message <input type = "text" id = "messageID" placeholder="" /> </label>
  <input type = "submit" height = 20  id = "sendButtonID" value = "Send message" width = "25" ></br>

    <div id = "messages" > 

        </div>

<script> 
        var socket = io();
        socket.on('connect', function() {
            console.log('connected from browser');
             document.getElementById("sendButtonID").addEventListener("click", function () {

                    var user = document.getElementById("userID").value;
                    var texter = document.getElementById("messageID").value;
                    if(user === "" && texter === "") {
                        alert("hello, Enter your user name and message ");
                    } else {
                        document.getElementById("messageID").value = "";
                        console.log("texter is ", texter);
                        console.log('listened to click event');
                        socket.emit('createMessage', {
                            to: "Everyone",
                            text: user + ": " + texter,
                        });
                    }
             });
        });
                

        socket.on('newMessage', function(message) {
            console.log('new Message', message);
            document.getElementById("messages").innerHTML += " <p> " + message.text + "</p>"
        })
        

        socket.on('disconnect', function() {
            console.log('disconnected from server');
        })

</script>

</body>
</html>

